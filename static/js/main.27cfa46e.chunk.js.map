{"version":3,"sources":["Components/Header.tsx","Components/Homepage.tsx","Components/PageNotFound.tsx","Components/Person.tsx","Components/HeaderCell.tsx","Components/TableHeader.tsx","Components/PeopleTable.tsx","Components/PeoplePage.tsx","helpers/debounce.ts","helpers/api.ts","App.tsx","index.tsx"],"names":["Header","className","to","exact","activeClassName","Homepage","PageNotFound","Person","info","history","useHistory","slug","useParams","location","useLocation","searchParams","URLSearchParams","search","motherName","name","fatherName","onClick","push","pathname","toString","cn","sex","born","died","HeaderCell","sortedBy","get","sortOrder","set","order","getSortOrder","TableHeader","columnNames","map","key","PeopleTable","people","person","PeoplePage","useState","tableWithPeople","setTableWithPeople","sortType","debouncedVal","searchValue","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","sortPeople","sortParam","a","b","localeCompare","axios","data","find","father","mother","getDataFromServer","getFilteredPersons","searchQuery","normalizedQuery","toLowerCase","filter","includes","filteredTable","useMemo","sort","reverse","placeholder","type","value","onChange","e","target","App","path","component","from","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.27cfa46e.chunk.js","sourcesContent":["import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nexport const Header = () => (\n  <header className=\"header\">\n    <h1 className=\"header__capture\">People Table Application</h1>\n    <nav className=\"header__nav\">\n      <ul className=\"header__nav-list\">\n        <li className=\"header__nav-item\">\n          <NavLink to=\"/\" exact className=\"header__nav-link\" activeClassName=\"header__nav-link--active\">Home</NavLink>\n        </li>\n        <li className=\"header__nav-item\">\n          <NavLink to=\"/people\" className=\"header__nav-link\" activeClassName=\"header__nav-link--active\">People</NavLink>\n        </li>\n      </ul>\n    </nav>\n  </header>\n);\n","import React from 'react';\n\nexport const Homepage = () => {\n  return <h1 className=\"home-page\">Home page</h1>;\n};\n","import React from 'react';\n\nexport const PageNotFound = () => {\n  return <h1 className=\"error-page\">Page Not Found</h1>;\n};\n","import React from 'react';\nimport { useHistory, useParams, useLocation } from 'react-router-dom';\nimport cn from 'classnames';\n\ntype Props = {\n  info: PreparedPerson;\n};\n\nexport const Person: React.FC<Props> = ({\n  info,\n}) => {\n  const history = useHistory();\n  const { slug } = useParams();\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n  const motherName = info.motherName?.name;\n  const fatherName = info.fatherName?.name;\n\n  return (\n    <tr\n      onClick={() => {\n        history.push({\n          pathname: `/people/${info.slug}`,\n          search: searchParams.toString(),\n        });\n      }}\n      className={cn('table__person', {\n        'table__person-cell--male': info.sex === 'm',\n        'table__person-cell--female': info.sex === 'f',\n        'tab-person--selected': info.slug === slug,\n      })}\n    >\n      <td className=\"table__person-cell\">{info.name}</td>\n      <td className=\"table__person-cell\">{info.sex}</td>\n      <td className=\"table__person-cell\">{info.born}</td>\n      <td className=\"table__person-cell\">{info.died}</td>\n      <td className=\"table__person-cell\">{fatherName || 'not found'}</td>\n      <td className=\"table__person-cell\">{motherName || 'not found'}</td>\n    </tr>\n  );\n};\n","import React from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\n\ntype Props = {\n  name: string;\n};\n\nexport const HeaderCell: React.FC<Props> = ({ name }) => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const searchParams = new URLSearchParams(location.search);\n  const sortedBy = searchParams.get('sortBy');\n  const sortOrder = searchParams.get('sortOrder') || '';\n  const getSortOrder = (order: string) => {\n    switch (order) {\n      case 'asc':\n        return 'desc';\n      case 'desc':\n        return 'asc';\n      default:\n        return 'asc';\n    }\n  };\n\n  const setSortParam = () => {\n    if (name === 'Mother' || name === 'Father') {\n      return;\n    }\n\n    searchParams.set('sortBy', `${name}`);\n    searchParams.set('sortOrder', `${getSortOrder(sortOrder)}`);\n    history.push({\n      search: searchParams.toString(),\n    });\n  };\n\n  return (\n    <th\n      className=\"table__header-cell\"\n      onClick={() => {\n        setSortParam();\n      }}\n    >\n      {name}\n      {name === sortedBy && '*'}\n    </th>\n  );\n};\n","import React from 'react';\nimport { HeaderCell } from './HeaderCell';\n\ntype Props = {\n  columnNames: string[];\n};\n\nexport const TableHeader: React.FC<Props> = ({ columnNames }) => {\n  return (\n    <thead className=\"table__header\">\n      <tr className=\"table__header-row\">\n        {columnNames.map(name => <HeaderCell name={name} key={name} />)}\n      </tr>\n    </thead>\n  );\n};\n","import React from 'react';\nimport { Person } from './Person';\nimport { TableHeader } from './TableHeader';\n\ntype Props = {\n  people: PreparedPerson[];\n};\n\nexport const PeopleTable: React.FC<Props> = ({ people }) => {\n  const tableCaptions = ['Name', 'Sex', 'Born', 'Died', 'Mother', 'Father'];\n\n  return (\n    <table className=\"table\">\n      <caption className=\"table__capture\">People table</caption>\n      <TableHeader columnNames={tableCaptions} />\n      <tbody className=\"table__body\">\n        {people.map((person) => (\n          <Person info={person} key={person.name + person.died} />\n        ))}\n      </tbody>\n    </table>\n  );\n};\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { getPeople } from '../helpers/api';\nimport { useDebounce } from '../helpers/debounce';\nimport { PeopleTable } from './PeopleTable';\n\nexport const PeoplePage: React.FC = () => {\n  const [tableWithPeople, setTableWithPeople] = useState<PreparedPerson[]>([]);\n\n  const history = useHistory();\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n  const search = searchParams.get('query') || '';\n  const sortType = searchParams.get('sortBy') || '';\n  const sortOrder = searchParams.get('sortOrder') || '';\n\n  const debouncedVal = useDebounce(search, 500);\n\n  const sortPeople = (sortParam: string) => {\n    switch (sortParam) {\n      case 'Name':\n        return (a: PreparedPerson, b: PreparedPerson) => {\n          return a.name.localeCompare(b.name);\n        };\n\n      case 'Sex':\n        return (a: PreparedPerson, b: PreparedPerson) => a.sex.localeCompare(b.sex);\n      case 'Born':\n        return (a: PreparedPerson, b: PreparedPerson) => a.born - b.born;\n      default:\n        return (a: PreparedPerson, b: PreparedPerson) => a.died - b.died;\n    }\n  };\n\n  useEffect(() => {\n    const getDataFromServer = async () => {\n      const { data } = await getPeople();\n\n      setTableWithPeople(\n        data.map((person: Person) => ({\n          ...person,\n          fatherName: data.find(\n            (father: Person) => person.fatherName === father.name,\n          ),\n          motherName: data.find(\n            (mother: Person) => person.motherName === mother.name,\n          ),\n        })),\n      );\n    };\n\n    getDataFromServer();\n  }, []);\n\n  const getFilteredPersons = (\n    searchQuery: string,\n    people: PreparedPerson[],\n  ) => {\n    if (!searchQuery) {\n      return people;\n    }\n\n    const normalizedQuery = searchQuery.toLowerCase();\n\n    return people.filter((person) => {\n      if (!person.fatherName || !person.motherName) {\n        return person.name.toLowerCase().includes(normalizedQuery);\n      }\n\n      return `${person.name}\n              + ${person.fatherName.name}\n              +${person.motherName.name}`\n        .toLowerCase()\n        .includes(normalizedQuery);\n    });\n  };\n\n  const filteredTable = useMemo(() => {\n    if (sortOrder === 'asc' || sortOrder === '') {\n      return getFilteredPersons(debouncedVal, tableWithPeople).sort(sortPeople(sortType));\n    }\n\n    return getFilteredPersons(debouncedVal, tableWithPeople).sort(sortPeople(sortType)).reverse();\n  }, [debouncedVal, tableWithPeople, sortType, sortOrder]);\n\n  return (\n    <>\n      <input\n        placeholder=\"Person to find\"\n        type=\"text\"\n        value={search}\n        onChange={(e) => {\n          searchParams.set('query', e.target.value);\n          history.push({\n            search: searchParams.toString(),\n          });\n        }}\n      />\n      <PeopleTable people={filteredTable} />\n    </>\n  );\n};\n","import { useState, useEffect } from 'react';\n\nexport const useDebounce = (searchValue: string, delay: number) => {\n  const [debouncedValue, setDebouncedValue] = useState(searchValue);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(searchValue);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  },\n  [searchValue, delay]);\n\n  return debouncedValue;\n};\n","import axios from 'axios';\n\nconst URL = 'https://mate-academy.github.io/react_people-table/api/people.json';\n\nexport const getPeople = () => {\n  return axios.get(URL);\n};\n","import React from 'react';\nimport {\n  Switch, Route, Redirect,\n} from 'react-router-dom';\nimport './App.css';\nimport { Header } from './Components/Header';\nimport { Homepage } from './Components/Homepage';\nimport { PageNotFound } from './Components/PageNotFound';\nimport { PeoplePage } from './Components/PeoplePage';\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <Header />\n      <Switch>\n        <Route\n          path=\"/people/:slug?\"\n          component={PeoplePage}\n        />\n        <Route\n          path=\"/\"\n          exact\n          component={Homepage}\n        />\n        <Redirect\n          from=\"/home\"\n          to=\"/\"\n        />\n        <Route\n          component={PageNotFound}\n        />\n      </Switch>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}